{% extends 'base.html' %}
{% load humanize %}
{% block content %}
<h2 class="text-uppercase">Loan Detail <a class="btn btn-primary" href="{% url 'customer_dashboard' %}">Back to
        Dashboard</a></h2>

<div class="container">
    <div class="row">
        <div class="col-3"><strong>Status:</strong></div>
        <div class="col-9">{{ loan.get_status_display }}</div>
    </div>
    <hr>
    <div class="row">
        <div class="col-3"><strong>Total Amount:</strong></div>
        <div class="col-9">₦{{ loan.total_amount|intcomma }}</div>
    </div>
    <hr>
    <div class="row">
        <div class="col-3"><strong>Amount Paid:</strong></div>
        <div class="col-9">₦{{ loan.total_paid|intcomma }}</div>
    </div>
    <hr>
    <div class="row">
        <div class="col-3"><strong>Amount Left:</strong></div>
        <div class="col-9">₦{{ loan.amount_left|intcomma }}</div>
    </div>
    <hr>

    <div class="row">
        <div class="col-3"><strong>Period:</strong></div>
        <div class="col-9">{{ loan.period }} months</div>
    </div>
    <hr>

    <div class="row">
        <div class="col-3"><strong>Created On:</strong></div>
        <div class="col-9">{{ loan.created_at|date:"Y-m-d H:i" }}</div>
    </div>
    <hr>
    <div class="row">
        <div class="col-3"><strong>Ending Date:</strong></div>
        <div class="col-9">{{ loan.due_date|date:"Y-m-d" }}</div>
    </div>
    <hr>
    <div class="row">
        <div class="col-3"><strong>Time Left:</strong></div>
        <div class="col-9">{{ loan.time_left }} months</div>
    </div>
    <hr>

</div>
<br>

<h3>Items Received</h3>
<div class="table-responsive small">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Item Name</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Amount</th>
            </tr>
        </thead>

        <tbody>

            {% for item in loan_items %}
            <tr>
                <td>{{ forloop.counter|intcomma }}</td>
                <td>{{ item.name }}</td>
                <td>₦{{ item.price|intcomma }}</td>
                <td>{{ item.quantity }}</td>
                <td>₦{{ item.amount |intcomma }}</td>

            </tr>
            {% empty %}
            <li>No items found for this loan.</li>
            {% endfor %}
        </tbody>
    </table>
</div>

<h3>Payment History</h3>
<div class="table-responsive small">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Amount</th>
                <th scope="col">Date Paid</th>
            </tr>
        </thead>

        <tbody>

            {% for payment in payments %}
            <tr>
                <td>{{ forloop.counter|intcomma }}</td>
                <td>₦{{ payment.amount|intcomma }}</td>
                <td>{{ payment.payment_date|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <li>No Payment have been made yet.</li>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}